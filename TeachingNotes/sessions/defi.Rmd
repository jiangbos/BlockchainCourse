# From the previous session

## Hard forks

1. Ethereum vs. Ethereum classic
    * One processes the same amount of ETH and ETC at the time of the fork [@Pauls2016]
1. EOS token migration
    * EOS Token transfer on Ethereum blockchain freezes on 1 June 2018 22:59:59 UTC/GMT
    * Register Ethereum mainnet address prior to the deadline: associate the public key of one's Ethereum wallet with the public key of his (native) EOS wallet [@Masnavi2018]

## Future development of Ethereum

- EIP (Ethereum Improvement Proposals)-1559
- ETH 2.0
    1. Proof of stake
    1. Sharding
- Layer 2 scaling
    1. State channels (similar to Bitcoin lightning network): no open participation, application specific
    1. Plasma: no waiting period to withdraw funds from layer 2, not suitable for smart contracts
    1. Side chains: invalid state transition attack --- invalid block on a side chain
    1. Rollups: increase data layer capacity
        - zk Rollups: fast but difficult for existing smart contracts to migrate
        - Optimistic rollup: EVM compatible but slower
  

## Game-theoretic modeling on blockchain

1. Bitcoin mining pools: A cooperative game theoretic analysis [@Lewenberg2015]
1. Bitcoin Mining as a Contest [@Dimitri2017]
1. Game-theoretic analysis of DDoS attacks against bitcoin mining pools [@Johnson2014a]
1. On Power Splitting Games in Distributed Computation: The Case of Bitcoin Pooled Mining [@Luu2015]

# Cross-platform communication

## Oracle

Data feed services that provide smart contracts with external information / off-chain information. [@Klages-Mundt2020]

1. Centralized oracle
    * can be proven that the data feed is an authentic representation of a particular source
    * but it is still inherently manipulable by the source
1. Decentralized oracle: remain an open research question

## Atomic swap with HTLCs

![Hash Timelock Contracts](figure/htlc-f-upd.png){width=80%}

---

1. Alice initiates the transaction by generating a secret (a key) that will be used to unlock the asset transfers later on. She then deploys a smart contract on Chain$_a$, that will lock her assets until time $t_a$.     * This contract will transfer to Bob the assets only if the secret generated by Alice is revealed and entered in the smart contract.
    * After time $t_a$, should the secret have not been revealed, the smart contract expires and Alice's assets will be unlocked and returned to her wallet
1. Bob can verify the contract deployed by Alice on Chain$_a$ (assets, delivery address, etc.) and use the hash submitted by Alice in order to deploy a similar contract on Chain$_b$.
1. Alice can verify the contract deployed on Chain$_b$, unlock the assets, and initiate their transfer to her wallet by revealing the secret on Chain$_b$.
1. As early as when the secret is revealed in the mempool of Chain$_b$ (even before the Alice's transfer is confirmed), Bob can use the secret to unlock the assets on Chain$_a$ and complete the cross-ledger transaction.


# Decentralized finance 

## Decentralized exchange (DEX) {.shrink}

### DEXs on Ethereum: Automated market makers (AMM)
- Actors
    1. Liquidity initiator / introducer
    1. Liquidity provider
    1. Exchange user
    1. Arbitrageurs
    1. Protocol foundation
- Assets
    1. Risk assets
    1. Base/native assets
    1. Quote assets
    1. Pool shares
    1. Governance token
- Conservation function
    1. Uniswap: $k = R_o \cdot R_i$
    1. Balancer: $k = R_o^{W_o} \cdot R_i^{W^i}$
    1. Bancor: $k = \frac{S_j \cdot P_j}{R_{\tt USD}}$

---

### DEXs on XRPL: Ledger gateway

- Orderbook structure
- User-defined trustline
- IOU issuance
- Transitive trustline (ripple effect)


***Take statements on the Internet with a pinch of salt***

Ripple XRP: RTGS New Cross Border Payment System, Is Ripple in Trouble Here???: https://www.youtube.com/watch?v=kkZpSM6VwJU

## Stablecoin [@Klages-Mundt2020]

- Custodial
    * Reserve Fund: Libra
    * Fractional Reserve Fund: $\tt USDT$
    * Central Bank Digital Currency (CBDC) (?)
- Non-custodial
    * $\tt DAI$: Collateralized by $\tt ETH$
    
## Lending protocols on Ethereum

- Value locked: deposits, liquidity supply
    - Maker: 2.4 Billion USD
    - Compound: 1.5 Billion USD
    - Aave: 1.3 Billion USD
- IOU token: proof that the protocol owes you
    - Maker: $\tt DAI$
    - Compound: $\tt cToken$
    - Aave: $\tt aToken$
- Collateral
- Liquidation
- Interest rate
- Governance token
    - Maker: $\tt MKR$
    - Compound: $\tt COMP$
    - Aave: $\tt AAVE$

## CeFi lending vs. DeFi lending

![Lending markets landscape](figure/lendingmarkets)
